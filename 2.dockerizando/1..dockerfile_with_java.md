<!-- title -->
<h1 align="center">Dockerfile</h1>

## O que √© um Dockerfile?
√â um arquivo usado para criar imagens Docker, definindo como o container deve se comportar. O arquivo √© chamado de `Dockerfile` e n√£o possui extens√£o.

‚ö†Ô∏è Esse arquivo `Dockerfile` n√£o possui extension (.txt, .exe, .pdf, etc...).


<hr>
<br>

## Commands de um Dockerfile

Os commands mais usados s√£o:

- `FROM` --> Informamos a image base que vamos usar para construir nossa image (Geralmente √© o primeiro command).

<br>

- `WORKDIR` --> Define o diret√≥rio padr√£o desse container. Isso quer dizer que todos os commands que usarmos, `COPY`, `RUN`, or ,`CMD`, vao fazer referencia a esse diret√≥rio.

<br>

- `COPY` --> Copia arquivos do computador para o container.

<br>

- `RUN` --> Executa comandos no terminal do container durante a constru√ß√£o da imagem.

<br>

- `EXPOSE` --> Exp√µe uma porta do container, permitindo acesso externo. √â atrav√©s dessa porta que conseguimos acessar esse container.

<br>

- `ENV` --> Define vari√°veis de ambiente.

<br>

- `CMD` --> Comando que √© executado quando o container √© iniciado.

<br>

Para construir a imagem Docker, usamos:

`docker build -t image_tal:version33 ./`

<hr>
<br>

## Criando um Dockerfile com openJDK (Java)
Crie um Dockerfile contendo apenas o openJDK (java). Ou seja, um container contendo apenas o java instalado.

<br>

### Programa Simples, Sem Intera√ß√£o
Neste exemplo, nosso programa Java n√£o receber√° entrada do usu√°rio, ou seja, n√£o ter√° intera√ß√£o.


1. Criamos nosso programinha em Java

    ```java
    public class AppInsano{
        public static void main(String[] args){
            System.out.println("Salve Docker!!");
        }
    }
    ```
<br>

2. Criamos nosso Dockerfile

    ```Dockerfile
    # usamos a imagem base do openjdk
    FROM openjdk:8

    # definimos a pasta padrao do container. Todos os commandos vao referenciar essa pasta
    WORKDIR /diretorioPadrao

    # copiamos todos os arquvos do nosso computador para o container
    COPY . .

    # Executamos todas as configs para nossa aplicacao funcionar. Nesse caso, compilamos o arquivo ".java" em um arquivo ".class (execut√°vel)"
    RUN ["javac", "AppInsano.java"]

    # Esse eh o command que vai ser executado quando rodarmos o container.
    CMD ["java", "AppInsano"]

    ```
<br>

2. Buildamos nossa docker image

    ```bash
    docker build -t java_sem_interacao:version1 ./; # -t √© a tag/nome da imagem
    # O command docker build automaticamente procura por um arquivo "DockerFile"
    ```

<br>

3. Criamos e rodamos nosso container

    ```bash
    docker run --name 'containerInsano' 1bbd2f5f705f;
    ```

<br>
<br>

### Criando um programa com interacao do usuario (`-it`)
Aqui, nosso programinha em Java vai receber input do usuario pelo terminal.

1. Criamos nosso programinha em java

    ```java
    public class AppInsano{
        public static void main(String[] args){
            Scanner scan = new Scanner(System.in);
            String name = "";
            
            System.out.print("Digite seu nome: ");
            name = scan.nextLine();
            System.out.println(String.format("%s √© um nome muito insano!", name));

            scan.close();
        }
    }
    ```
<br>

2. Buildamos nossa docker image

    ```bash
    docker build -t java_com_interacao:version1 ./; # -t √© o nome/tag da image
    ```

<br>

3. Criamos e rodamos nosso container interativo:

    ```bash
    docker run --name 'containerInsano2' -it db9077165f69;
    ```

üí° Se ligou?? Se seu programa em Java precisar do input do usuario, voce ativa a interatividade `-it`.


<hr>
<br>

## Por qu√™ alguns containers permanecem em execu√ß√£o e outros fecham?


- Processo Cont√≠nuo: Containers que executam processos cont√≠nuos, como servidores web, permanecem abertos enquanto esses processos est√£o ativos. Exemplo: Nginx, Postgres.

- Processo que Termina: Containers com processos que terminam rapidamente, como scripts ou programas que apenas imprimem algo e depois saem, fecham logo ap√≥s o t√©rmino. Exemplo: programa Java que imprime uma mensagem.

<br>

üí° Dica: A flag `-d` executa o container em segundo plano. Isso permite que o container continue rodando enquanto voc√™ usa o terminal para outras tarefas.